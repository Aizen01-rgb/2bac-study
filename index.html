<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Login | 2BAC</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f4f6fb;display:flex;justify-content:center;align-items:center;height:100vh}
.card{background:white;padding:30px;border-radius:20px;width:320px;text-align:center}
input,button{width:100%;padding:12px;margin:8px 0;border-radius:12px;border:1px solid #ccc}
button{background:#5b8def;color:white;font-weight:bold;border:none}
.error{color:red;display:none}
</style>
</head>

<body>
<div class="card">
<h2>تسجيل الدخول</h2>
<input id="email" placeholder="Gmail">
<input id="code" placeholder="Code">
<button onclick="login()">سجّل</button>
<div id="error" class="error"></div>
</div>

<script>
function login(){
  const email=email.value.trim();
  const code=code.value.trim();
  const error=document.getElementById("error");

  const users=JSON.parse(localStorage.getItem("users"))||[];
  const codes=JSON.parse(localStorage.getItem("codes"))||{};

  error.style.display="none";

  if(!email.endsWith("@gmail.com")){
    error.textContent="Adresse Gmail invalide";
    error.style.display="block";
    return;
  }

  if(users.includes(email) && codes[email]===code){
    window.location.href="subjects.html";
  }else{
    error.textContent="Ce compte n'existe pas";
    error.style.display="block";
  }
}
</script>
</body>
</html>