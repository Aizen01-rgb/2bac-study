<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

/* ================= RESET ================= */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI',Tahoma;
}
body{
  background:#0a0215;
  color:white;
  display:flex;
  height:100vh;
  overflow:hidden;
}

/* ================= SIDEBAR ================= */
#sidebar{
  width:240px;
  background:#120124;
  border-right:2px solid rgba(125,45,255,.4);
  box-shadow:0 0 25px #7d2dff88;
  padding:20px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}

#sidebar .logo{
  font-size:22px;
  font-weight:700;
  color:#d4b3ff;
  margin-bottom:20px;
  text-shadow:0 0 8px #7d2dff;
}

#sidebar .menu li{
  list-style:none;
  padding:12px;
  margin-bottom:8px;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(125,45,255,.4);
  border-radius:10px;
  cursor:pointer;
  transition:.3s;
}
#sidebar .menu li:hover{
  background:rgba(125,45,255,.35);
  box-shadow:0 0 12px #7d2dff;
}
#sidebar .menu li.active{
  background:#7d2dff;
  color:#fff;
  box-shadow:0 0 16px #7d2dff;
}

.lang-box{
  margin-top:20px;
  display:flex;
  gap:6px;
}
.lang-box button{
  flex:1;
  padding:8px;
  background:#2d0066;
  border:1px solid #7d2dff;
  border-radius:8px;
  color:white;
  font-size:13px;
  cursor:pointer;
}
.lang-box button:hover{
  background:#7d2dff;
}

/* ================= MAIN ================= */
#main{
  flex:1;
  padding:20px;
  overflow-y:auto;
}

/* ================= PAGE ================= */
.page{
  display:none;
  animation:fade .4s;
}
.page.active{
  display:block;
}

@keyframes fade{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}

/* ================= DASHBOARD ================= */
.stats-box{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:18px;
  margin-top:20px;
}

.stat-item{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(125,45,255,.4);
  padding:20px;
  border-radius:14px;
  box-shadow:0 0 15px #7d2dff55;
  text-align:center;
}
.stat-item h3{
  color:#d5b4ff;
  margin-bottom:10px;
  text-shadow:0 0 8px #7d2dff;
}
.stat-item p{
  font-size:24px;
  font-weight:700;
}

/* ================= MATERIAL TABS ================= */
.sem-tabs{
  margin:18px 0;
  display:flex;
  gap:10px;
}
.sem-btn{
  padding:10px 18px;
  background:#2d0066;
  border:1px solid #7d2dff;
  border-radius:10px;
  color:#fff;
  cursor:pointer;
  transition:.3s;
}
.sem-btn.active{
  background:#7d2dff;
  box-shadow:0 0 18px #7d2dff;
}

/* ================= LESSONS LIST ================= */
.lessons-list{
  display:flex;
  flex-direction:column;
  gap:14px;
}

.lesson-card{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(125,45,255,.4);
  padding:16px;
  border-radius:12px;
  box-shadow:0 0 12px #7d2dff55;
  cursor:grab;
}
.lesson-card:active{
  cursor:grabbing;
}

.lesson-title{
  font-size:18px;
  color:#d8b8ff;
  margin-bottom:6px;
}
.lesson-desc{
  color:#c7a3ff;
  font-size:14px;
  margin-bottom:10px;
}

.lesson-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.lesson-actions button{
  padding:6px 12px;
  border:none;
  border-radius:8px;
  background:#4e1abf;
  color:white;
  cursor:pointer;
  font-size:12px;
}
.lesson-actions button:hover{
  background:#7d2dff;
  box-shadow:0 0 8px #7d2dff;
}

/* ================= ADD LESSON FORM ================= */
#addForm{
  display:flex;
  flex-direction:column;
  gap:16px;
  margin-top:20px;
}

#addForm label{
  color:#d8b8ff;
  margin-bottom:6px;
}
#addForm input, #addForm textarea, #addForm select{
  padding:12px;
  background:#2d0050;
  border:1px solid #7d2dff;
  border-radius:10px;
  color:white;
}
#addForm textarea{
  min-height:80px;
}

#addForm button{
  padding:12px;
  background:#7d2dff;
  border:none;
  border-radius:12px;
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  margin-top:10px;
  box-shadow:0 0 14px #7d2dff;
}
#addForm button:hover{
  transform:scale(1.03);
}

/* ================= MOBILE ================= */
@media(max-width:780px){
  #sidebar{
    width:180px;
  }
  .stat-item{
    padding:16px;
  }
}
@media(max-width:560px){
  body{
    flex-direction:column;
  }
  #sidebar{
    width:100%;
    height:auto;
    display:flex;
    flex-direction:column;
  }
  #main{
    height:auto;
  }
}

</style>
</head>

<body>

<!-- ======================= SIDEBAR ======================= -->
<div id="sidebar">

  <h2 class="logo">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

  <ul class="menu">

    <li data-page="dashboard">ğŸ“Š Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</li>

    <li data-page="math">ğŸ“ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</li>

    <li data-page="pc">ğŸ’» Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</li>

    <li data-page="svt">ğŸ§¬ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶</li>

    <li data-page="english">ğŸ‡¬ğŸ‡§ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</li>

    <li data-page="philo">ğŸ§  Ø§Ù„ÙÙ„Ø³ÙØ©</li>

    <li data-page="add">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³</li>

  </ul>

  <!-- languages -->
  <div class="lang-box">
    <button data-lang="ar">AR</button>
    <button data-lang="fr">FR</button>
    <button data-lang="en">EN</button>
  </div>

</div>

<!-- ======================= MAIN CONTENT ======================= -->
<div id="main">

  <!-- ================= DASHBOARD ================== -->
  <div class="page" id="dashboard">
    <h1>ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h1>

    <div class="stats-box">
      <div class="stat-item">
        <h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
        <p id="stat_total">0</p>
      </div>

      <div class="stat-item">
        <h3>Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</h3>
        <p id="stat_s1">0</p>
      </div>

      <div class="stat-item">
        <h3>Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</h3>
        <p id="stat_s2">0</p>
      </div>

      <div class="stat-item">
        <h3>Ù…Ù„ÙØ§Øª PDF</h3>
        <p id="stat_pdf">0</p>
      </div>
    </div>

  </div>

  <!-- ================= MATERIAL TEMPLATES ================== -->

  <!-- MATH -->
  <div class="page" id="math">
    <h1>ğŸ“ Ø¯Ø±ÙˆØ³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</h1>

    <div class="sem-tabs">
      <button data-sem="s1" class="sem-btn active">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (S1)</button>
      <button data-sem="s2" class="sem-btn">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (S2)</button>
    </div>

    <div class="lessons-list" id="math_s1"></div>
    <div class="lessons-list" id="math_s2" style="display:none;"></div>

  </div>

  <!-- PC -->
  <div class="page" id="pc">
    <h1>ğŸ’» Ø¯Ø±ÙˆØ³ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</h1>

    <div class="sem-tabs">
      <button data-sem="s1" class="sem-btn active">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (S1)</button>
      <button data-sem="s2" class="sem-btn">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (S2)</button>
    </div>

    <div class="lessons-list" id="pc_s1"></div>
    <div class="lessons-list" id="pc_s2" style="display:none;"></div>
  </div>

  <!-- SVT -->
  <div class="page" id="svt">
    <h1>ğŸ§¬ Ø¯Ø±ÙˆØ³ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶</h1>

    <div class="sem-tabs">
      <button data-sem="s1" class="sem-btn active">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (S1)</button>
      <button data-sem="s2" class="sem-btn">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (S2)</button>
    </div>

    <div class="lessons-list" id="svt_s1"></div>
    <div class="lessons-list" id="svt_s2" style="display:none;"></div>
  </div>

  <!-- ENGLISH -->
  <div class="page" id="english">
    <h1>ğŸ‡¬ğŸ‡§ Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h1>

    <div class="sem-tabs">
      <button data-sem="s1" class="sem-btn active">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (S1)</button>
      <button data-sem="s2" class="sem-btn">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (S2)</button>
    </div>

    <div class="lessons-list" id="eng_s1"></div>
    <div class="lessons-list" id="eng_s2" style="display:none;"></div>
  </div>

  <!-- PHILOSOPHY -->
  <div class="page" id="philo">
    <h1>ğŸ§  Ø¯Ø±ÙˆØ³ Ø§Ù„ÙÙ„Ø³ÙØ©</h1>

    <div class="sem-tabs">
      <button data-sem="s1" class="sem-btn active">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (S1)</button>
      <button data-sem="s2" class="sem-btn">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (S2)</button>
    </div>

    <div class="lessons-list" id="philo_s1"></div>
    <div class="lessons-list" id="philo_s2" style="display:none;"></div>
  </div>

  <!-- ================= ADD LESSON ================== -->
  <div class="page" id="add">
    <h1>â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h1>

    <form id="addForm">

      <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©:</label>
      <select id="add_subject">
        <option value="math">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
        <option value="pc">Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</option>
        <option value="svt">Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶</option>
        <option value="english">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
        <option value="philo">Ø§Ù„ÙÙ„Ø³ÙØ©</option>
      </select>

      <label>Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
      <select id="add_sem">
        <option value="s1">S1</option>
        <option value="s2">S2</option>
      </select>

      <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³:</label>
      <input id="add_title" type="text">

      <label>ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³:</label>
      <textarea id="add_desc"></textarea>

      <label>Ø±Ø§Ø¨Ø· ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø³:</label>
      <input id="add_link" type="text" placeholder="ex: lessons/lesson1.html">

      <label>Ù…Ù„Ù PDF (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
      <input id="add_pdf" type="file">

      <button type="button" id="saveLessonBtn">Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³</button>

    </form>

  </div>

</div>
<script>
// =============================================
//         1) SWITCH BETWEEN SIDEBAR PAGES
// =============================================

const pages = document.querySelectorAll(".page");
const menuItems = document.querySelectorAll("#sidebar .menu li");

menuItems.forEach(item => {
  item.addEventListener("click", () => {
    // remove active class from all
    menuItems.forEach(i => i.classList.remove("active"));
    item.classList.add("active");

    const pageId = item.getAttribute("data-page");

    // hide all pages
    pages.forEach(p => p.classList.remove("active"));

    // show selected page
    document.getElementById(pageId).classList.add("active");
  });
});

// Default open dashboard
document.querySelector('[data-page="dashboard"]').classList.add("active");
document.getElementById("dashboard").classList.add("active");


// =============================================
//      2) SEMESTER TABS SWITCH (S1 / S2)
// =============================================

document.querySelectorAll(".sem-tabs").forEach(tabSection => {

  const btns = tabSection.querySelectorAll(".sem-btn");

  btns.forEach(btn => {

    btn.addEventListener("click", () => {

      // remove active
      btns.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      const sem = btn.getAttribute("data-sem");
      const parentPage = btn.closest(".page").id; // example: math, pc ...

      // hide all lists inside this page
      document.querySelectorAll(`#${parentPage} .lessons-list`)
        .forEach(list => list.style.display = "none");

      // show the right list
      document.querySelector(`#${parentPage}_${sem}`).style.display = "block";

    });

  });

});


// =============================================
//       3) BASIC DATA STRUCTURE preparation
// =============================================

// lessons array (will fill later step by step)
let lessons = JSON.parse(localStorage.getItem("lessons") || "[]");

// Function to refresh stats (later we will update this)
function updateStats() {
  const total = lessons.length;
  const s1 = lessons.filter(l => l.sem === "s1").length;
  const s2 = lessons.filter(l => l.sem === "s2").length;
  const pdfCount = lessons.filter(l => l.pdf !== null).length;

  document.getElementById("stat_total").textContent = total;
  document.getElementById("stat_s1").textContent = s1;
  document.getElementById("stat_s2").textContent = s2;
  document.getElementById("stat_pdf").textContent = pdfCount;
}
// =============================================
//      5) RENDER LESSONS IN EACH SUBJECT + S1/S2
// =============================================

function renderLessons() {
  
  // clear all lists
  document.querySelectorAll(".lessons-list").forEach(list => list.innerHTML = "");

  lessons
    .sort((a,b) => a.order - b.order) // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ order
    .forEach(lesson => {

      // target container
      const box = document.getElementById(`${lesson.subject}_${lesson.sem}`);

      if (!box) return;

      box.innerHTML += `
        <div class="lesson-card" draggable="true" data-id="${lesson.id}">
          <div class="lesson-title">${lesson.title}</div>
          <div class="lesson-desc">${lesson.desc}</div>

          <div class="lesson-actions">
            <button onclick="openLesson('${lesson.link}')">ÙØªØ­</button>
            <button onclick="editLesson(${lesson.id})">ØªØ¹Ø¯ÙŠÙ„</button>
            <button onclick="deleteLesson(${lesson.id})">Ø­Ø°Ù</button>
            <button onclick="uploadPDF(${lesson.id})">PDF</button>
          </div><button onclick="openPDF('${lesson.pdf}')">Ø¹Ø±Ø¶ PDF</button>
        </div>
      `;
    });

  enableDragDrop();
}

renderLessons();
updateStats();
// =============================================
//      4) ADD LESSON + SAVE TO LOCALSTORAGE
// =============================================

document.getElementById("saveLessonBtn").addEventListener("click", () => {

  const subject = document.getElementById("add_subject").value;
  const sem = document.getElementById("add_sem").value;
  const title = document.getElementById("add_title").value.trim();
  const desc = document.getElementById("add_desc").value.trim();
  const link = document.getElementById("add_link").value.trim();

  if (!title || !desc || !link) {
    alert("Ø¹Ø§ÙØ§Ùƒ Ø¹Ù…Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø§Ù†Ø§Øª ğŸ‘Œ");
    return;
  }

  const newLesson = {
    id: Date.now(),
    subject: subject,   // math, pc, svt, english, philo
    sem: sem,           // s1 or s2
    title: title,
    desc: desc,
    link: link,
    pdf: null,
    order: lessons.filter(l => l.subject === subject && l.sem === sem).length + 1
  };

  lessons.push(newLesson);
  localStorage.setItem("lessons", JSON.stringify(lessons));

  alert("âœ”ï¸ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­!");

  // refresh UI
  updateStats();
  renderLessons();

  // go to subject page automatically
  document.querySelector(`[data-page="${subject}"]`).click();

  // reset form
  document.getElementById("add_title").value = "";
  document.getElementById("add_desc").value = "";
  document.getElementById("add_link").value = "";
});
// =============================================
//                  6) DELETE LESSON
// =============================================

function deleteLesson(id) {
  if (!confirm("Ø¨ØºÙŠØª Ø¨Ø§Ù„ÙØ¹Ù„ ØªØ­Ø°Ù Ù‡Ø§Ø¯ Ø§Ù„Ø¯Ø±Ø³ØŸ")) return;

  lessons = lessons.filter(l => l.id !== id);
  localStorage.setItem("lessons", JSON.stringify(lessons));

  renderLessons();
  updateStats();
}

// =============================================
//                  7) OPEN LESSON PAGE
// =============================================

function openLesson(link) {
  window.location.href = link;
}

// =============================================
//                  8) EDIT LESSON (BASIC)
// =============================================

function editLesson(id) {
  const l = lessons.find(x => x.id == id);

  document.getElementById("add_subject").value = l.subject;
  document.getElementById("add_sem").value = l.sem;
  document.getElementById("add_title").value = l.title;
  document.getElementById("add_desc").value = l.desc;
  document.getElementById("add_link").value = l.link;

  // remove old version
  lessons = lessons.filter(x => x.id != id);
  localStorage.setItem("lessons", JSON.stringify(lessons));

  // go to add page
  document.querySelector('[data-page="add"]').click();
}
// =============================================
//           9) UPLOAD PDF (TEMP LINK)
// =============================================

function uploadPDF(id) {
  // create file input dynamically
  const input = document.createElement("input");
  input.type = "file";
  input.accept = "application/pdf";

  input.onchange = () => {
    const file = input.files[0];
    if (!file) return;

    // create temp PDF URL
    const pdfUrl = URL.createObjectURL(file);

    // update lesson
    const l = lessons.find(x => x.id == id);
    l.pdf = pdfUrl;

    localStorage.setItem("lessons", JSON.stringify(lessons));

    alert("âœ”ï¸ ØªÙ… Ø±ÙØ¹ PDF Ø¨Ù†Ø¬Ø§Ø­!");

    renderLessons();
    updateStats();
  };

  // click input
  input.click();
}function openPDF(url) {
  if (!url) return alert("Ù…Ø§ÙƒØ§ÙŠÙ† Ø­ØªÙ‰ PDF Ù„Ù‡Ø§Ø° Ø§Ù„Ø¯Ø±Ø³!");
  window.open(url, "_blank");
}
</script>
</body>
</html>