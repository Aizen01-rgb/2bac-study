<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* =================== GLOBAL =================== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI',Tahoma;
}

body{
  background:#0a0215;
  color:#fff;
  min-height:100vh;
  padding:18px;
}

/* =================== NEON STYLE =================== */
.glass{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(140,0,255,.3);
  backdrop-filter:blur(14px);
  border-radius:18px;
  padding:18px;
  box-shadow:0 0 25px rgba(140,0,255,.45);
}

.btn{
  padding:10px 18px;
  background:linear-gradient(135deg,#7d2dff,#4e1abf);
  border:none;
  border-radius:14px;
  color:#fff;
  cursor:pointer;
  font-weight:700;
  box-shadow:0 0 12px #7d2dff;
  transition:.3s;
}
.btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 20px #9b5cff;
}

/* =================== TOP BAR =================== */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:22px;
}

.langs button{
  margin-left:6px;
  background:#2d0066;
  border:1px solid #7d2dff;
  padding:6px 10px;
  border-radius:8px;
  color:#fff;
}

/* =================== TABS =================== */
.tabs{
  display:flex;
  gap:12px;
  margin-bottom:20px;
}
.tab-btn{
  padding:12px 20px;
  background:#2d0066;
  border:1px solid #7d2dff;
  color:#fff;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
  transition:.3s;
}
.tab-btn.active{
  background:#7d2dff;
  box-shadow:0 0 18px #7d2dff;
}

/* =================== PAGES =================== */
.page{
  display:none;
}
.page.active{
  display:block;
}

/* =================== DASHBOARD =================== */
.stats{
  display:grid;
  gap:16px;
}
.stat-box{
  padding:18px;
  border-radius:14px;
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(125,45,255,.4);
  box-shadow:0 0 15px #7d2dff55;
}
.stat-box h3{margin-bottom:8px;color:#cfaaff}

.add-btn-big{
  margin-top:20px;
  width:100%;
  padding:18px;
  font-size:18px;
}

/* =================== LESSON LIST =================== */
.lesson-card{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(125,45,255,.4);
  padding:16px;
  border-radius:18px;
  margin-bottom:14px;
  box-shadow:0 0 15px #7d2dff55;
}
.lesson-card h3{
  margin-bottom:6px;
  color:#d5b4ff;
}
.lesson-actions{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.small-btn{
  padding:7px 12px;
  background:#4e1abf;
  border:none;
  color:white;
  border-radius:8px;
  font-size:13px;
}

/* =================== ADD LESSON FORM =================== */
.form-group{
  margin-bottom:16px;
}
.form-group label{
  display:block;
  margin-bottom:6px;
  color:#cfaaff;
}
.form-group input, .form-group select, .form-group textarea{
  width:100%;
  padding:10px;
  background:#2d0050;
  border:1px solid #7d2dff;
  border-radius:10px;
  color:#fff;
}
textarea{min-height:90px;}
</style>
</head>

<body>

<!-- ================= TOP BAR ================= -->
<div class="top">
  <h2 id="t_title">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

  <div class="langs">
    <button onclick="setLang('ar')">AR</button>
    <button onclick="setLang('fr')">FR</button>
    <button onclick="setLang('en')">EN</button>
  </div>
</div>

<!-- =============== TABS ==================== -->
<div class="tabs">
  <button class="tab-btn active" onclick="openTab('dash')">ğŸ“Š Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button class="tab-btn" onclick="openTab('list')">ğŸ“š Ø§Ù„Ø¯Ø±ÙˆØ³</button>
  <button class="tab-btn" onclick="openTab('add')">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³</button>
</div>

<!-- ================== DASHBOARD ================== -->
<div id="dash" class="page active glass">

  <div class="stats">
    <div class="stat-box">
      <h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
      <p id="stat_total">0</p>
    </div>

    <div class="stat-box">
      <h3>Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</h3>
      <p id="stat_s1">0</p>
    </div>

    <div class="stat-box">
      <h3>Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</h3>
      <p id="stat_s2">0</p>
    </div>

    <div class="stat-box">
      <h3>Ù…Ù„ÙØ§Øª PDF</h3>
      <p id="stat_pdf">0</p>
    </div>
  </div>

  <button class="btn add-btn-big" onclick="openTab('add')">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</button>
</div>

<!-- ================== LESSONS LIST ================== -->
<div id="list" class="page glass"></div>


<!-- ================== ADD LESSON PAGE ================== -->
<div id="add" class="page glass">

  <h3 style="margin-bottom:20px;">Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h3>

  <div class="form-group">
    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³</label>
    <input id="lesson_title">
  </div>

  <div class="form-group">
    <label>ÙˆØµÙ Ø§Ù„Ø¯Ø±Ø³</label>
    <textarea id="lesson_desc"></textarea>
  </div>

  <div class="form-group">
    <label>Ø§Ù„Ø¯ÙˆØ±Ø©</label>
    <select id="lesson_sem">
      <option value="s1">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</option>
      <option value="s2">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</option>
    </select>
  </div>

  <div class="form-group">
    <label>Ø±Ø§Ø¨Ø· ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø³</label>
    <input id="lesson_link" placeholder="ex: lessons/continuite.html">
  </div>

  <button class="btn" onclick="saveLesson()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³</button>

</div>

<script>
// =========================================
//         LOCAL STORAGE MEMORY
// =========================================
let lessons = JSON.parse(localStorage.getItem("lessons") || "[]");

function saveLesson(){
  const title = lesson_title.value.trim();
  const desc = lesson_desc.value.trim();
  const sem  = lesson_sem.value;
  const link = lesson_link.value.trim();

  if(!title || !desc || !link){
    alert("Ø¹Ø§ÙØ§Ùƒ Ø¹ÙÙ…Ù‘Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø§Ù†Ø§Øª");
    return;
  }

  lessons.push({title,desc,sem,link,pdf:null});
  localStorage.setItem("lessons",JSON.stringify(lessons));
  loadLessons();
  updateStats();
  openTab("list");
}

// ========== Load Lessons in Page ==========
function loadLessons(){
  const box = document.getElementById("list");
  box.innerHTML = "";

  lessons.forEach((l,i)=>{
    box.innerHTML += `
      <div class="lesson-card">
        <h3>${l.title}</h3>
        <p>${l.sem === "s1"?"Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰":"Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©"}</p>

        <div class="lesson-actions">
          <button class="small-btn" onclick="editLesson(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="small-btn" onclick="deleteLesson(${i})">Ø­Ø°Ù</button>
          <button class="small-btn" onclick="uploadPDF(${i})">Ø±ÙØ¹ PDF</button>
          <button class="small-btn" onclick="openLesson('${l.link}')">ÙØªØ­ Ø§Ù„ØµÙØ­Ø©</button>
        </div>
      </div>
    `;
  });
}

function deleteLesson(i){
  if(confirm("Ù…ØªØ£ÙƒØ¯ Ø¨ØºÙŠØªÙŠ ØªØ­Ø°Ù Ø§Ù„Ø¯Ø±Ø³ØŸ")){
    lessons.splice(i,1);
    localStorage.setItem("lessons",JSON.stringify(lessons));
    loadLessons();
    updateStats();
  }
}

function editLesson(i){
  const l = lessons[i];
  lesson_title.value = l.title;
  lesson_desc.value  = l.desc;
  lesson_sem.value   = l.sem;
  lesson_link.value  = l.link;

  lessons.splice(i,1);
  localStorage.setItem("lessons",JSON.stringify(lessons));
  loadLessons();
  openTab("add");
}

function uploadPDF(i){
  alert("Ø¯Ø§Ø¨Ø§ ØºÙŠØ± Ù†Ø®Ù„ÙŠÙˆÙ‡Ø§ Placeholder Ø­ØªÙ‰ Ù†Ø±Ø¨Ø·Ùˆ Firebase â¤ï¸");
}

function openLesson(link){
  location.href = link;
}

// ========== Dashboard Numbers ==========
function updateStats(){
  stat_total.innerText = lessons.length;
  stat_s1.innerText    = lessons.filter(l=>l.sem==="s1").length;
  stat_s2.innerText    = lessons.filter(l=>l.sem==="s2").length;
  stat_pdf.innerText   = lessons.filter(l=>l.pdf!==null).length;
}

loadLessons();
updateStats();

// =========================================
//            TABS
// =========================================
function openTab(name){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(name).classList.add("active");

  document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
}

// =========================================
//              LANGUAGES
// =========================================
const t={
  ar:{
    t_title:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
  },
  fr:{
    t_title:"Panneau d'administration",
  },
  en:{
    t_title:"Admin Panel",
  }
};

function setLang(lang){
  localStorage.setItem("admin_lang",lang);
  document.getElementById("t_title").innerText = t[lang].t_title;
}

if(localStorage.getItem("admin_lang")){
  setLang(localStorage.getItem("admin_lang"));
}
</script>

</body>
</html>